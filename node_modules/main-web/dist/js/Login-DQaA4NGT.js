var C=(w,b,u)=>new Promise((d,n)=>{var c=s=>{try{p(u.next(s))}catch(m){n(m)}},g=s=>{try{p(u.throw(s))}catch(m){n(m)}},p=s=>s.done?d(s.value):Promise.resolve(s.value).then(c,g);p((u=u.apply(w,b)).next())});import{v as B,j as F,l as D,h as L,B as V,E as o,C as t,R as r,J as E,a5 as N,D as i,am as A,ab as _,r as z,Q as f,ax as M,z as h,G,y as I,P as K}from"./vue-vendor-cbtcMa4H.js";import{E as q,y as P,z as U,A as j}from"./element-plus-CNEJPjnD.js";import{u as J,a as O,L as Q,_ as T}from"../assets/index-CpQeOtZX.js";import{u as W}from"./role-D1Y75zto.js";import"./ant-design-vue-Cgy9cVNS.js";import"./wujie-t0hE8KOt.js";import"../locales/locale-zh-DBIw02TZ.js";import"../locales/locale-en-2iulXTap.js";import"../locales/locale-es-CsuMhuQq.js";const H="/google.png",X="/facebook.png",Y={class:"login-container"},Z={class:"language-toggle"},x={class:"login-card"},ee={class:"login-header"},se={class:"role-grid"},oe=["onClick"],le={class:"role-icon-wrapper"},ae={class:"role-name"},te={class:"role-desc"},re={class:"floating-label-wrapper"},ie={class:"floating-label"},ne={class:"floating-label-wrapper"},de={class:"floating-label"},ue={class:"forgot-password"},ce={class:"social-login"},ge={class:"divider"},pe={class:"no-account"},me=B({__name:"Login",setup(w){const b=M(),u=J(),d=W(),{t:n}=O(),c=z(),g=z(!1),p=[{value:"user",icon:P},{value:"designer",icon:U},{value:"supplier",icon:j}],s=D({username:"",password:"",role:"user"});F(()=>{d.initRole();const e=d.selectedRole;e==="guest"?(s.role="user",d.setRole("user")):s.role=e}),L(()=>d.selectedRole,e=>{e==="guest"?s.role="user":s.role=e}),L(()=>s.role,e=>{d.setRole(e)});const m={username:[{required:!0,message:()=>n("validation.usernameRequired"),trigger:"blur"}],password:[{required:!0,message:()=>n("validation.passwordRequired"),trigger:"blur"},{min:6,message:()=>n("validation.passwordLength"),trigger:"blur"}]},y=()=>C(this,null,function*(){if(c.value)try{yield c.value.validate(),g.value=!0,yield u.login(s),q.success(n("login.success"));const e={designer:"/designer",supplier:"/supplier",user:"/user",guest:"/guest"};b.push(e[s.role]||"/dashboard")}catch(e){q.error(e.message||n("login.failed"))}finally{g.value=!1}});return(e,l)=>{const $=_("el-input"),k=_("el-form-item"),v=_("el-button"),R=_("el-link"),S=_("el-form");return h(),V("div",Y,[o("div",Z,[t(Q)]),o("div",x,[o("div",ee,[o("h1",null,r(e.$t("login.title")),1)]),o("div",se,[(h(),V(E,null,N(p,a=>o("div",{key:a.value,class:G(["role-card",{active:s.role===a.value}]),onClick:_e=>s.role=a.value},[o("div",le,[(h(),I(K(a.icon),{class:"role-icon-svg"}))]),o("div",ae,r(e.$t(`roles.${a.value}`)),1),o("div",te,r(e.$t(`roles.${a.value}Desc`)),1)],10,oe)),64))]),t(S,{ref_key:"loginFormRef",ref:c,model:s,rules:m,class:"login-form",onKeyup:A(y,["enter"])},{default:i(()=>[t(k,{prop:"username",class:"required-field floating-label-item"},{default:i(()=>[o("div",re,[t($,{modelValue:s.username,"onUpdate:modelValue":l[0]||(l[0]=a=>s.username=a),placeholder:" ",size:"large"},null,8,["modelValue"]),o("label",ie,r(e.$t("login.emailLabel")),1)])]),_:1}),t(k,{prop:"password",class:"required-field floating-label-item"},{default:i(()=>[o("div",ne,[t($,{modelValue:s.password,"onUpdate:modelValue":l[1]||(l[1]=a=>s.password=a),type:"password",placeholder:" ",size:"large","show-password":""},null,8,["modelValue"]),o("label",de,r(e.$t("login.passwordLabel")),1)])]),_:1}),t(v,{type:"primary",size:"large",loading:g.value,class:"login-btn",onClick:y},{default:i(()=>[f(r(e.$t("login.submit")),1)]),_:1},8,["loading"]),t(v,{size:"large",class:"register-btn",onClick:l[2]||(l[2]=a=>e.$router.push("/register"))},{default:i(()=>[f(r(e.$t("login.toRegister")),1)]),_:1}),o("div",ue,[t(R,{type:"primary"},{default:i(()=>[f(r(e.$t("login.forgotPassword")),1)]),_:1})]),o("div",ce,[o("div",ge,r(e.$t("login.orLoginWith")),1),t(v,{class:"social-btn google-btn"},{default:i(()=>[...l[4]||(l[4]=[o("img",{src:H,alt:"Google",class:"social-logo"},null,-1)])]),_:1}),t(v,{class:"social-btn facebook-btn"},{default:i(()=>[...l[5]||(l[5]=[o("img",{src:X,alt:"Facebook",class:"social-logo"},null,-1)])]),_:1})]),o("div",pe,[f(r(e.$t("login.noAccount"))+" ",1),t(R,{type:"primary",onClick:l[3]||(l[3]=a=>e.$router.push("/register"))},{default:i(()=>[f(r(e.$t("login.registerNow")),1)]),_:1})])]),_:1},8,["model"])])])}}}),Le=T(me,[["__scopeId","data-v-75502a06"]]);export{Le as default};
